<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Tracker</title>
</head>
<body>
    <h1>Location Tracker</h1>
    <button onclick="getLocation()">Get My Location</button>
    <div id="currentLocation"></div>
    <h2>Location History (Last 5)</h2>
    <ul id="historyList"></ul>
    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                document.getElementById('currentLocation').innerHTML = 'Geolocation is not supported by this browser.';
            }
        }
        function showPosition(position) {
            var lat = position.coords.latitude;
            var long = position.coords.longitude;
            document.getElementById('currentLocation').innerHTML = 'Latitude: ' + lat + '<br>Longitude: ' + long;
            
            var history = JSON.parse(localStorage.getItem('locationHistory')) || [];
            var entry = { lat: lat, long: long, timestamp: new Date().toLocaleString() };
            history.unshift(entry);  
            if (history.length > 5) history = history.slice(0, 5);  
            localStorage.setItem('locationHistory', JSON.stringify(history));
            displayHistory();
        }
        function showError(error) {
            var message = '';
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    message = 'User denied the request for Geolocation.';
                    break;
                case error.POSITION_UNAVAILABLE:
                    message = 'Location information is unavailable.';
                    break;
                case error.TIMEOUT:
                    message = 'The request to get user location timed out.';
                    break;
                default:
                    message = 'An unknown error occurred.';
                    break;
            }
            document.getElementById('currentLocation').innerHTML = message;
        }
        function displayHistory() {
            var history = JSON.parse(localStorage.getItem('locationHistory')) || [];
            var list = document.getElementById('historyList');
            list.innerHTML = '';
            history.forEach(function(entry) {
                var li = document.createElement('li');
                li.innerText = 'Lat: ' + entry.lat + ', Long: ' + entry.long + ' (' + entry.timestamp + ')';
                list.appendChild(li);
            });
        }
        window.onload = displayHistory;
    </script>
</body>
</html>